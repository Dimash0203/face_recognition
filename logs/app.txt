2025-09-20 14:51:41.617 | INFO     | Логирование настроено. Файл: C:\Users\disag\PycharmProjects\face_recognition\logs\app.txt
2025-09-20 14:51:41.617 | INFO     | Started server process [21580]
2025-09-20 14:51:41.617 | INFO     | Started server process [21580]
2025-09-20 14:51:41.617 | INFO     | Waiting for application startup.
2025-09-20 14:51:41.617 | INFO     | Waiting for application startup.
2025-09-20 14:51:41.871 | INFO     | [startup] Весовые файлы доступны в: C:\Users\disag\PycharmProjects\face_recognition\.deepface\weights
2025-09-20 14:51:47.841 | INFO     | [startup] Модель 'Facenet' загружена
2025-09-20 14:51:47.841 | INFO     | Application startup complete.
2025-09-20 14:51:47.841 | INFO     | Application startup complete.
2025-09-20 14:51:47.857 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 14:51:47.859 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 14:51:53.917 | INFO     | 127.0.0.1:50253 - "GET /docs HTTP/1.1" 200
2025-09-20 14:51:54.035 | INFO     | 127.0.0.1:50253 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 14:51:55.622 | INFO     | 127.0.0.1:50253 - "GET /docs HTTP/1.1" 200
2025-09-20 14:51:55.682 | INFO     | 127.0.0.1:50253 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 14:51:56.243 | INFO     | 127.0.0.1:50253 - "GET /docs HTTP/1.1" 200
2025-09-20 14:51:56.300 | INFO     | 127.0.0.1:50253 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 14:51:56.634 | INFO     | 127.0.0.1:50253 - "GET /docs HTTP/1.1" 200
2025-09-20 14:51:56.684 | INFO     | 127.0.0.1:50253 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 14:52:03.932 | INFO     | 127.0.0.1:50254 - "GET /docs HTTP/1.1" 200
2025-09-20 14:52:03.974 | INFO     | 127.0.0.1:50254 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 14:52:08.416 | INFO     | 127.0.0.1:50254 - "GET /models HTTP/1.1" 200
2025-09-20 14:52:13.071 | INFO     | 127.0.0.1:50254 - "GET /healthz HTTP/1.1" 200
2025-09-20 14:52:14.353 | INFO     | 127.0.0.1:50254 - "GET /healthz HTTP/1.1" 200
2025-09-20 14:52:53.016 | INFO     | 127.0.0.1:50256 - "POST /verify HTTP/1.1" 200
2025-09-20 14:53:35.897 | INFO     | 127.0.0.1:50260 - "POST /verify HTTP/1.1" 200
2025-09-20 14:55:32.110 | INFO     | Shutting down
2025-09-20 14:55:32.110 | INFO     | Shutting down
2025-09-20 14:55:32.222 | INFO     | Waiting for application shutdown.
2025-09-20 14:55:32.224 | INFO     | Waiting for application shutdown.
2025-09-20 14:55:32.224 | INFO     | [shutdown] Завершение работы приложения
2025-09-20 14:55:32.225 | INFO     | Application shutdown complete.
2025-09-20 14:55:32.225 | INFO     | Application shutdown complete.
2025-09-20 14:55:32.225 | INFO     | Finished server process [21580]
2025-09-20 14:55:32.225 | INFO     | Finished server process [21580]
2025-09-20 14:58:50.249 | INFO     | Логирование настроено. Файл: C:\Users\disag\PycharmProjects\face_recognition\logs\app.txt
2025-09-20 14:58:50.249 | INFO     | Started server process [19808]
2025-09-20 14:58:50.249 | INFO     | Started server process [19808]
2025-09-20 14:58:50.249 | INFO     | Waiting for application startup.
2025-09-20 14:58:50.249 | INFO     | Waiting for application startup.
2025-09-20 14:58:50.249 | INFO     | [startup] Весовые файлы доступны в: C:\Users\disag\PycharmProjects\face_recognition\.deepface\weights
2025-09-20 14:58:53.089 | INFO     | [startup] Модель 'Facenet' загружена
2025-09-20 14:58:53.089 | INFO     | Application startup complete.
2025-09-20 14:58:53.089 | INFO     | Application startup complete.
2025-09-20 14:58:53.089 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 14:58:53.089 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 14:58:56.277 | INFO     | 127.0.0.1:50322 - "GET /docs HTTP/1.1" 200
2025-09-20 14:58:56.483 | INFO     | 127.0.0.1:50322 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 15:17:17.217 | INFO     | Shutting down
2025-09-20 15:17:17.217 | INFO     | Shutting down
2025-09-20 15:17:17.327 | INFO     | Waiting for application shutdown.
2025-09-20 15:17:17.327 | INFO     | Waiting for application shutdown.
2025-09-20 15:17:17.327 | INFO     | [shutdown] Завершение работы приложения
2025-09-20 15:17:17.327 | INFO     | Application shutdown complete.
2025-09-20 15:17:17.327 | INFO     | Application shutdown complete.
2025-09-20 15:17:17.329 | INFO     | Finished server process [19808]
2025-09-20 15:17:17.329 | INFO     | Finished server process [19808]
2025-09-20 15:17:26.567 | INFO     | Логирование настроено. Файл: C:\Users\disag\PycharmProjects\face_recognition\logs\app.txt
2025-09-20 15:17:26.573 | INFO     | Started server process [13420]
2025-09-20 15:17:26.573 | INFO     | Started server process [13420]
2025-09-20 15:17:26.574 | INFO     | Waiting for application startup.
2025-09-20 15:17:26.574 | INFO     | Waiting for application startup.
2025-09-20 15:17:26.576 | INFO     | [startup] Весовые файлы доступны в: C:\Users\disag\PycharmProjects\face_recognition\.deepface\weights
2025-09-20 15:17:29.472 | INFO     | [startup] Модель 'Facenet' загружена
2025-09-20 15:17:29.472 | INFO     | Application startup complete.
2025-09-20 15:17:29.472 | INFO     | Application startup complete.
2025-09-20 15:17:29.472 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 15:17:29.472 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 15:17:30.073 | INFO     | 127.0.0.1:50433 - "GET /docs HTTP/1.1" 200
2025-09-20 15:17:30.281 | INFO     | 127.0.0.1:50433 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 15:18:03.749 | INFO     | Shutting down
2025-09-20 15:18:03.749 | INFO     | Shutting down
2025-09-20 15:18:03.862 | INFO     | Waiting for application shutdown.
2025-09-20 15:18:03.862 | INFO     | Waiting for application shutdown.
2025-09-20 15:18:03.862 | INFO     | [shutdown] Завершение работы приложения
2025-09-20 15:18:03.862 | INFO     | Application shutdown complete.
2025-09-20 15:18:03.862 | INFO     | Application shutdown complete.
2025-09-20 15:18:03.862 | INFO     | Finished server process [13420]
2025-09-20 15:18:03.862 | INFO     | Finished server process [13420]
2025-09-20 15:29:40.632 | INFO     | Логирование настроено. Файл: C:\Users\disag\PycharmProjects\face_recognition\logs\app.txt
2025-09-20 15:29:40.644 | INFO     | Started server process [3488]
2025-09-20 15:29:40.644 | INFO     | Started server process [3488]
2025-09-20 15:29:40.644 | INFO     | Waiting for application startup.
2025-09-20 15:29:40.644 | INFO     | Waiting for application startup.
2025-09-20 15:29:40.644 | INFO     | [startup] Весовые файлы доступны в: C:\Users\disag\PycharmProjects\face_recognition\.deepface\weights
2025-09-20 15:29:40.648 | INFO     | Загрузка модели 'Facenet'
2025-09-20 15:29:43.770 | INFO     | [startup] Модель 'Facenet' загружена
2025-09-20 15:29:43.770 | INFO     | [startup] Watchdog запущен (interval=600s)
2025-09-20 15:29:43.774 | WARNING  | [watchdog] Не удалось прочитать smoketest_image_path: tests\same1.jpeg
2025-09-20 15:29:43.774 | INFO     | [watchdog] smoketest отключён (нет изображения). Буду спать, но контроль не выполняю.
2025-09-20 15:29:43.774 | INFO     | Application startup complete.
2025-09-20 15:29:43.774 | INFO     | Application startup complete.
2025-09-20 15:29:43.774 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 15:29:43.774 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 15:29:44.416 | INFO     | 127.0.0.1:50603 - "GET /docs HTTP/1.1" 200
2025-09-20 15:29:44.770 | INFO     | 127.0.0.1:50603 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 15:29:53.367 | INFO     | Shutting down
2025-09-20 15:29:53.368 | INFO     | Shutting down
2025-09-20 15:29:53.480 | INFO     | Waiting for application shutdown.
2025-09-20 15:29:53.480 | INFO     | Waiting for application shutdown.
2025-09-20 15:29:53.480 | INFO     | [shutdown] Завершение работы приложения
2025-09-20 15:29:53.480 | INFO     | Application shutdown complete.
2025-09-20 15:29:53.482 | INFO     | Application shutdown complete.
2025-09-20 15:29:53.482 | INFO     | Finished server process [3488]
2025-09-20 15:29:53.482 | INFO     | Finished server process [3488]
2025-09-20 15:30:01.905 | INFO     | Логирование настроено. Файл: C:\Users\disag\PycharmProjects\face_recognition\logs\app.txt
2025-09-20 15:30:01.907 | INFO     | Started server process [3252]
2025-09-20 15:30:01.907 | INFO     | Started server process [3252]
2025-09-20 15:30:01.907 | INFO     | Waiting for application startup.
2025-09-20 15:30:01.907 | INFO     | Waiting for application startup.
2025-09-20 15:30:01.913 | INFO     | [startup] Весовые файлы доступны в: C:\Users\disag\PycharmProjects\face_recognition\.deepface\weights
2025-09-20 15:30:01.913 | INFO     | Загрузка модели 'Facenet'
2025-09-20 15:30:04.722 | INFO     | [startup] Модель 'Facenet' загружена
2025-09-20 15:30:04.722 | INFO     | [startup] Watchdog запущен (interval=600s)
2025-09-20 15:30:05.517 | INFO     | Application startup complete.
2025-09-20 15:30:05.517 | INFO     | Application startup complete.
2025-09-20 15:30:05.520 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 15:30:05.520 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 15:30:09.087 | INFO     | 127.0.0.1:50608 - "GET /docs HTTP/1.1" 200
2025-09-20 15:30:09.151 | INFO     | 127.0.0.1:50608 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 15:31:05.268 | INFO     | Shutting down
2025-09-20 15:31:05.276 | INFO     | Shutting down
2025-09-20 15:31:05.393 | INFO     | Waiting for application shutdown.
2025-09-20 15:31:05.393 | INFO     | Waiting for application shutdown.
2025-09-20 15:31:05.424 | ERROR    | Traceback (most recent call last):
  File "C:\Users\disag\PycharmProjects\face_recognition\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "C:\Users\disag\PycharmProjects\face_recognition\.venv\Lib\site-packages\fastapi\routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "C:\Users\disag\PycharmProjects\face_recognition\main.py", line 50, in lifespan
    await task
  File "C:\Users\disag\PycharmProjects\face_recognition\app\watchdog.py", line 48, in watchdog_task
    await asyncio.sleep(settings.watchdog_interval_sec)
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 649, in sleep
    return await future
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

2025-09-20 15:31:05.424 | ERROR    | Traceback (most recent call last):
  File "C:\Users\disag\PycharmProjects\face_recognition\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "C:\Users\disag\PycharmProjects\face_recognition\.venv\Lib\site-packages\fastapi\routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "C:\Users\disag\PycharmProjects\face_recognition\main.py", line 50, in lifespan
    await task
  File "C:\Users\disag\PycharmProjects\face_recognition\app\watchdog.py", line 48, in watchdog_task
    await asyncio.sleep(settings.watchdog_interval_sec)
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 649, in sleep
    return await future
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

2025-09-20 15:31:05.424 | ERROR    | Application shutdown failed. Exiting.
2025-09-20 15:31:05.424 | ERROR    | Application shutdown failed. Exiting.
2025-09-20 15:31:05.424 | INFO     | Finished server process [3252]
2025-09-20 15:31:05.424 | INFO     | Finished server process [3252]
2025-09-20 15:31:15.169 | INFO     | Логирование настроено. Файл: C:\Users\disag\PycharmProjects\face_recognition\logs\app.txt
2025-09-20 15:31:15.175 | INFO     | Started server process [9692]
2025-09-20 15:31:15.176 | INFO     | Started server process [9692]
2025-09-20 15:31:15.176 | INFO     | Waiting for application startup.
2025-09-20 15:31:15.176 | INFO     | Waiting for application startup.
2025-09-20 15:31:15.178 | INFO     | [startup] Весовые файлы доступны в: C:\Users\disag\PycharmProjects\face_recognition\.deepface\weights
2025-09-20 15:31:15.180 | INFO     | Загрузка модели 'Facenet'
2025-09-20 15:31:18.000 | INFO     | [startup] Модель 'Facenet' загружена
2025-09-20 15:31:18.002 | INFO     | [startup] Watchdog запущен (interval=600s)
2025-09-20 15:31:18.806 | INFO     | Application startup complete.
2025-09-20 15:31:18.806 | INFO     | Application startup complete.
2025-09-20 15:31:18.806 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 15:31:18.806 | INFO     | Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-09-20 15:31:25.527 | INFO     | 127.0.0.1:50630 - "GET /docs HTTP/1.1" 200
2025-09-20 15:31:25.595 | INFO     | 127.0.0.1:50630 - "GET /openapi.json HTTP/1.1" 200
2025-09-20 15:31:28.836 | INFO     | tf_keras.backend.clear_session() выполнен
2025-09-20 15:31:28.836 | INFO     | Кэш моделей очищен
2025-09-20 15:31:28.841 | INFO     | Загрузка модели 'Facenet'
2025-09-20 15:31:28.841 | INFO     | 127.0.0.1:50630 - "POST /admin/reload HTTP/1.1" 200
2025-09-20 15:31:31.012 | INFO     | tf_keras.backend.clear_session() выполнен
2025-09-20 15:31:31.012 | INFO     | Кэш моделей очищен
2025-09-20 15:31:31.013 | INFO     | Загрузка модели 'Facenet'
2025-09-20 15:31:31.014 | INFO     | 127.0.0.1:50630 - "POST /admin/reload HTTP/1.1" 200
2025-09-20 15:31:41.868 | INFO     | Shutting down
2025-09-20 15:31:41.868 | INFO     | Shutting down
2025-09-20 15:31:41.972 | INFO     | Waiting for application shutdown.
2025-09-20 15:31:41.973 | INFO     | Waiting for application shutdown.
2025-09-20 15:31:41.975 | ERROR    | Traceback (most recent call last):
  File "C:\Users\disag\PycharmProjects\face_recognition\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "C:\Users\disag\PycharmProjects\face_recognition\.venv\Lib\site-packages\fastapi\routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "C:\Users\disag\PycharmProjects\face_recognition\main.py", line 50, in lifespan
    await task
  File "C:\Users\disag\PycharmProjects\face_recognition\app\watchdog.py", line 48, in watchdog_task
    await asyncio.sleep(settings.watchdog_interval_sec)
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 649, in sleep
    return await future
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

2025-09-20 15:31:41.975 | ERROR    | Traceback (most recent call last):
  File "C:\Users\disag\PycharmProjects\face_recognition\.venv\Lib\site-packages\starlette\routing.py", line 693, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "C:\Users\disag\PycharmProjects\face_recognition\.venv\Lib\site-packages\fastapi\routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "C:\Users\disag\PycharmProjects\face_recognition\main.py", line 50, in lifespan
    await task
  File "C:\Users\disag\PycharmProjects\face_recognition\app\watchdog.py", line 48, in watchdog_task
    await asyncio.sleep(settings.watchdog_interval_sec)
  File "C:\Users\disag\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 649, in sleep
    return await future
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

2025-09-20 15:31:41.977 | ERROR    | Application shutdown failed. Exiting.
2025-09-20 15:31:41.977 | ERROR    | Application shutdown failed. Exiting.
2025-09-20 15:31:41.978 | INFO     | Finished server process [9692]
2025-09-20 15:31:41.979 | INFO     | Finished server process [9692]
